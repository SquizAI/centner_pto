(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8751],{2531:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(30926);let a=(0,s.createServerReference)("405d06ac5ca85a10f4a5d4716a9abb6f1810139eb1",s.callServer,void 0,s.findSourceMapURL,"deleteRSVP")},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>i});var s=r(95155),a=r(12115),n=r(32467),l=r(83101),d=r(64269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,d.cn)(i({variant:a,size:l,className:r})),ref:t,...c})});o.displayName="Button"},10489:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var s=r(12115),a=r(97602),n=r(95155),l=s.forwardRef((e,t)=>(0,n.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var d=l},11647:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var s=r(95155);r(12115);var a=r(83101),n=r(64269);let l=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...a})}},16485:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},17181:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},21873:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},30926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}});let s=r(41209),a=r(85153),n=r(77197)},31120:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var s=r(95155),a=r(12115),n=r(64269);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});l.displayName="Textarea"},42529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51834:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>m,Es:()=>f,L3:()=>p,c7:()=>x,lG:()=>i,rr:()=>h,zM:()=>o});var s=r(95155),a=r(12115),n=r(89511),l=r(65229),d=r(64269);let i=n.bL,o=n.l9,c=n.ZL;n.bm;let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});u.displayName=n.hJ.displayName;let m=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[a,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let x=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};x.displayName="DialogHeader";let f=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="DialogFooter";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});p.displayName=n.hE.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})});h.displayName=n.VY.displayName},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},65142:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var s=r(95155),a=r(12115),n=r(64269);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},65581:(e,t,r)=>{Promise.resolve().then(r.bind(r,97185))},76444:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(95155),a=r(12115),n=r(10489),l=r(83101),d=r(64269);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,d.cn)(i(),r),...a})});o.displayName=n.b.displayName},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>d,wL:()=>u});var s=r(95155),a=r(12115),n=r(64269);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});l.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},89364:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var s=r(30926);let a=(0,s.createServerReference)("409241288867de481d59d489a4bf40325d923f271b",s.callServer,void 0,s.findSourceMapURL,"createRSVP")},91169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},97185:(e,t,r)=>{"use strict";r.d(t,{EventDetailClient:()=>S});var s=r(95155),a=r(12115),n=r(86948),l=r(11647),d=r(3998),i=r(51834),o=r(65142),c=r(76444),u=r(31120),m=r(42529),x=r(16485),f=r(21873),p=r(91169),h=r(17181),g=r(15239),v=r(52619),y=r.n(v),b=r(89364),j=r(2531),N=r(18720),w=r(20063);let k={all:"All Campuses",preschool:"Preschool",elementary:"Elementary","middle-high":"Middle & High School"},R={all:"bg-primary/10 text-primary border-primary/20",preschool:"bg-blue-100 text-blue-700 border-blue-200",elementary:"bg-green-100 text-green-700 border-green-200","middle-high":"bg-purple-100 text-purple-700 border-purple-200"};function S(e){var t;let{event:r,rsvps:v,userRsvp:S,relatedEvents:_,isAuthenticated:C}=e,A=(0,w.useRouter)(),[P,M]=(0,a.useState)(!1),[E,L]=(0,a.useState)(1),[V,Z]=(0,a.useState)(""),[D,z]=(0,a.useState)(!1),[U,B]=(0,a.useState)(S),F=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),T=async()=>{if(!C){N.o.error("Please log in to RSVP"),A.push("/login");return}z(!0);let e=await (0,b.M)({event_id:r.id,parent_name:"User",parent_email:"user@example.com",num_adults:E,num_children:0,notes:V});e.error?N.o.error(e.error):(N.o.success("RSVP successful!"),M(!1),A.refresh()),z(!1)},$=async()=>{if(!U)return;z(!0);let e=await (0,j.T)(U.id);e.error?N.o.error(e.error):(N.o.success("RSVP cancelled"),B(null),A.refresh()),z(!1)},O=async()=>{if(navigator.share)try{await navigator.share({title:r.title,text:r.description||void 0,url:window.location.href})}catch(e){console.error("Error sharing:",e)}else navigator.clipboard.writeText(window.location.href),N.o.success("Link copied to clipboard!")},W=r.max_attendees&&(r.current_attendees||0)>=r.max_attendees,q=!U&&!W&&"published"===r.status;return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[(0,s.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[r.image_url&&(0,s.jsx)("div",{className:"relative w-full h-96 rounded-lg overflow-hidden",children:(0,s.jsx)(g.default,{src:r.image_url,alt:r.title,fill:!0,className:"object-cover",priority:!0})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[null==(t=r.campus)?void 0:t.map(e=>(0,s.jsx)(l.E,{variant:"outline",className:R[e]||R.all,children:k[e]||e},e)),r.event_type&&(0,s.jsx)(l.E,{variant:"secondary",children:r.event_type}),"cancelled"===r.status&&(0,s.jsx)(l.E,{variant:"destructive",children:"Cancelled"})]}),(0,s.jsx)(n.ZB,{className:"text-3xl",children:r.title})]}),(0,s.jsx)(n.Wu,{children:r.description&&(0,s.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,s.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:r.description})})})]}),v.length>0&&(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)(n.ZB,{children:["Attendees (",v.length,")"]})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[v.slice(0,10).map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 text-green-600"}),(0,s.jsxs)("span",{children:[(null==(t=e.profiles)?void 0:t.full_name)||"Anonymous",e.guests_count&&e.guests_count>1&&(0,s.jsxs)("span",{className:"text-muted-foreground",children:[" ","+",e.guests_count-1," guest",e.guests_count>2?"s":""]})]})]},e.id)}),v.length>10&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["And ",v.length-10," more..."]})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Event Details"})}),(0,s.jsxs)(n.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:F(r.event_date)}),r.end_date&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Until ",F(r.end_date)]})]})]}),r.location&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(f.A,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),(0,s.jsx)("p",{children:r.location})]}),r.max_attendees&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),(0,s.jsxs)("p",{children:[r.current_attendees||0," / ",r.max_attendees," attendees",W&&(0,s.jsx)(l.E,{variant:"destructive",className:"ml-2",children:"Full"})]})]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Actions"})}),(0,s.jsxs)(n.Wu,{className:"space-y-3",children:[U?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[(0,s.jsx)(m.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"You're attending!"})]}),(0,s.jsx)(d.$,{variant:"outline",className:"w-full",onClick:$,disabled:D,children:"Cancel RSVP"})]}):q?(0,s.jsx)(d.$,{className:"w-full",onClick:()=>M(!0),disabled:D,children:"RSVP Now"}):W?(0,s.jsx)(d.$,{className:"w-full",disabled:!0,children:"Event Full"}):null,(0,s.jsxs)(d.$,{variant:"outline",className:"w-full",onClick:O,children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Share Event"]})]})]}),_.length>0&&(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Related Events"})}),(0,s.jsx)(n.Wu,{className:"space-y-3",children:_.map(e=>(0,s.jsxs)(y(),{href:"/calendar/".concat(e.id),className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:[(0,s.jsx)("p",{className:"font-medium text-sm mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:F(e.event_date)})]},e.id))})]})]})]})]})}),(0,s.jsx)(i.lG,{open:P,onOpenChange:M,children:(0,s.jsxs)(i.Cf,{children:[(0,s.jsxs)(i.c7,{children:[(0,s.jsxs)(i.L3,{children:["RSVP for ",r.title]}),(0,s.jsx)(i.rr,{children:"Let us know you're coming!"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"guests",children:"Number of Guests"}),(0,s.jsx)(o.p,{id:"guests",type:"number",min:"1",max:"10",value:E,onChange:e=>L(parseInt(e.target.value))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"notes",children:"Notes (Optional)"}),(0,s.jsx)(u.T,{id:"notes",placeholder:"Any special requests or information...",value:V,onChange:e=>Z(e.target.value),rows:3})]})]}),(0,s.jsxs)(i.Es,{children:[(0,s.jsx)(d.$,{variant:"outline",onClick:()=>M(!1),disabled:D,children:"Cancel"}),(0,s.jsx)(d.$,{onClick:T,disabled:D,children:D?"Submitting...":"Confirm RSVP"})]})]})})]})}}},e=>{e.O(0,[4909,2619,5239,3529,8720,1691,8441,1255,7358],()=>e(e.s=65581)),_N_E=e.O()}]);