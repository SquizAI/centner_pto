(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2988],{2531:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(30926);let n=(0,s.createServerReference)("405d06ac5ca85a10f4a5d4716a9abb6f1810139eb1",s.callServer,void 0,s.findSourceMapURL,"deleteRSVP")},6259:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>x,_2:()=>h,lp:()=>u,mB:()=>p,rI:()=>o,ty:()=>m});var s=a(95155),n=a(12115),l=a(47971),r=a(27937),i=a(5917),c=a(99051),d=a(64269);let o=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,n.forwardRef((e,t)=>{let{className:a,inset:n,children:i,...c}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...c,children:[i,(0,s.jsx)(r.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...n})}).displayName=l.G5.displayName;let x=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})})});x.displayName=l.UC.displayName;let h=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",a),...r})});h.displayName=l.q7.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...c}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...c,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),n]})}).displayName=l.H_.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=l.hN.displayName;let u=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})});u.displayName=l.JU.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});p.displayName=l.wv.displayName},13167:(e,t,a)=>{Promise.resolve().then(a.bind(a,81047))},18332:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>c,TN:()=>d});var s=a(95155),n=a(12115),l=a(83101),r=a(64269);let i=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,r.cn)(i({variant:n}),a),...l})});c.displayName="Alert",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h5",{ref:t,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",a),...n})}).displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",a),...n})});d.displayName="AlertDescription"},81047:(e,t,a)=>{"use strict";a.d(t,{default:()=>q});var s=a(95155),n=a(12115),l=a(15239),r=a(52619),i=a.n(r),c=a(20063),d=a(1733),o=a(35626),m=a(82063),x=a(17181),h=a(16485),u=a(21873),p=a(91169),f=a(61362),g=a(78874),v=a(50042),j=a(99933),N=a(3998),y=a(86948),w=a(11647),b=a(51834),k=a(18332),_=a(12181),R=a(35299),S=a(2531),C=a(18720),A=a(25742),E=a(98053);function P(e){let{event:t,userRSVP:a,rsvpCount:l,onRSVPSuccess:r,onRSVPCancel:i}=e,d=(0,c.useRouter)(),[o,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[f,v]=(0,n.useState)(a),j=!!t.max_attendees&&l>=t.max_attendees,y=async()=>{if(f){p(!0);try{let e=await (0,S.T)(f.id);e.success?(C.o.success("RSVP cancelled successfully"),v(null),h(!1),null==i||i(),d.refresh()):C.o.error(e.error||"Failed to cancel RSVP")}catch(e){console.error("Cancel RSVP error:",e),C.o.error("Failed to cancel RSVP")}finally{p(!1)}}};return f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(N.$,{variant:"outline",className:"w-full border-green-500 text-green-600 hover:bg-green-50",disabled:!0,children:[(0,s.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"You're Attending"]}),(0,s.jsx)(N.$,{variant:"outline",className:"w-full",onClick:()=>h(!0),disabled:u,children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Cancelling..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Cancel RSVP"]})})]}),(0,s.jsx)(E.Lt,{open:x,onOpenChange:h,children:(0,s.jsxs)(E.EO,{children:[(0,s.jsxs)(E.wd,{children:[(0,s.jsx)(E.r7,{children:"Cancel RSVP?"}),(0,s.jsxs)(E.$v,{children:["Are you sure you want to cancel your RSVP for ",t.title,"? This action cannot be undone."]})]}),(0,s.jsxs)(E.ck,{children:[(0,s.jsx)(E.Zr,{disabled:u,children:"Keep RSVP"}),(0,s.jsx)(E.Rx,{onClick:y,disabled:u,className:"bg-red-600 hover:bg-red-700",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Cancelling..."]}):"Cancel RSVP"})]})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(N.$,{className:"w-full",size:"lg",onClick:()=>m(!0),disabled:j,children:[(0,s.jsx)(_.A,{className:"w-4 h-4 mr-2"}),j?"Event Full":"RSVP Now"]}),(0,s.jsx)(A.A,{event:t,open:o,onOpenChange:m,onSuccess:()=>{null==r||r(),d.refresh()}})]})}var V=a(39867),z=a(6259);function T(e){let{event:t}=e,a=new Date(t.event_date),n=new Date(t.end_date?t.end_date:a.getTime()+36e5),l=e=>e.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"");return(0,s.jsxs)(z.rI,{children:[(0,s.jsx)(z.ty,{asChild:!0,children:(0,s.jsxs)(N.$,{variant:"outline",className:"w-full",children:[(0,s.jsx)(V.A,{className:"w-4 h-4 mr-2"}),"Add to Calendar"]})}),(0,s.jsxs)(z.SQ,{align:"end",className:"w-56",children:[(0,s.jsxs)(z._2,{onClick:()=>{window.open((()=>{let e=new URLSearchParams({action:"TEMPLATE",text:t.title,dates:"".concat(l(a),"/").concat(l(n)),details:t.description||"",location:t.location||"",sprop:"website:".concat(window.location.origin,"/events/").concat(t.id)});return"https://calendar.google.com/calendar/render?".concat(e.toString())})(),"_blank")},children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),"Google Calendar"]}),(0,s.jsxs)(z._2,{onClick:()=>{window.open((()=>{let e=new URLSearchParams({subject:t.title,body:t.description||"",location:t.location||"",startdt:a.toISOString(),enddt:n.toISOString(),path:"/calendar/action/compose",rru:"addevent"});return"https://outlook.live.com/calendar/0/deeplink/compose?".concat(e.toString())})(),"_blank")},children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M7.88 12.04q0 .45-.11.87-.1.41-.33.74-.22.33-.58.52-.37.2-.87.2t-.85-.2q-.35-.21-.57-.55-.22-.33-.33-.75-.1-.42-.1-.86t.1-.87q.1-.43.34-.76.22-.34.59-.54.36-.2.87-.2t.86.2q.35.21.57.55.22.34.31.77.1.43.1.88zM24 12v9.38q0 .46-.33.8-.33.32-.8.32H7.13q-.46 0-.8-.33-.32-.33-.32-.8V18H1q-.41 0-.7-.3-.3-.29-.3-.7V7q0-.41.3-.7Q.58 6 1 6h6.5V2.55q0-.44.3-.75.3-.3.75-.3h12.9q.44 0 .75.3.3.3.3.75V10.85l1.24.7q.5.28.5.85zm-6-8.25v3h3v-3zm0 4.5v3h3v-3zm0 4.5v1.83l3.05-1.83zm-5.25-9v3h3.75v-3zm0 4.5v3h3.75v-3zm0 4.5v2.03l2.41 1.5 1.34-.8v-2.73zM9 3.75V6h2l.13.01.12.04v-2.3zM5.98 15.98q.9 0 1.6-.3.7-.32 1.19-.86.48-.55.73-1.28.25-.74.25-1.61 0-.83-.25-1.55-.24-.71-.71-1.24t-1.15-.83q-.68-.3-1.55-.3-.92 0-1.64.3-.71.3-1.2.85-.5.54-.75 1.3-.25.74-.25 1.63 0 .85.26 1.56.26.72.74 1.23.48.52 1.17.81.69.3 1.56.3zM7.5 21h12.39L12 16.08V17q0 .41-.3.7-.29.3-.7.3H7.5zm15-.13v-7.24l-5.9 3.54Z"})}),"Outlook"]}),(0,s.jsxs)(z._2,{onClick:()=>{var e;let s=new Blob(["BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Centner Academy PTO//Events//EN\nBEGIN:VEVENT\nUID:".concat(t.id,"@centneracademy.com\nDTSTAMP:").concat(l(new Date),"\nDTSTART:").concat(l(a),"\nDTEND:").concat(l(n),"\nSUMMARY:").concat(t.title,"\nDESCRIPTION:").concat((null==(e=t.description)?void 0:e.replace(/\n/g,"\\n"))||"","\nLOCATION:").concat(t.location||"","\nURL:").concat(window.location.origin,"/events/").concat(t.id,"\nSTATUS:CONFIRMED\nEND:VEVENT\nEND:VCALENDAR")],{type:"text/calendar;charset=utf-8"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download="".concat(t.title.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".ics"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple Calendar"]})]})]})}var M=a(91216);function q(e){var t,a;let{event:r,rsvpCount:_,userRSVP:R,relatedEvents:S}=e,A=(0,c.useRouter)(),[E,V]=(0,n.useState)(!1),[z,q]=(0,n.useState)(!1),[D,L]=(0,n.useState)(_),[F,O]=(0,n.useState)(R),U=new Date(r.event_date),B=r.end_date?new Date(r.end_date):U,I=U<new Date,Z=!I,$=e=>{let t="".concat(window.location.origin,"/events/").concat(r.id),a=(0,v.GP)(U,"MMMM d, yyyy [at] h:mm a");if("email"===e){let e="Event: ".concat(r.title),s="Check out this event!\n\n".concat(r.title,"\n").concat(a,"\n").concat(r.location?"Location: ".concat(r.location,"\n"):"","\n").concat(r.description,"\n\nRSVP: ").concat(t);window.location.href="mailto:?subject=".concat(encodeURIComponent(e),"&body=").concat(encodeURIComponent(s)),C.o.success("Opening email client...")}else if("copy"===e){let e="".concat(r.title,"\n").concat(a,"\n").concat(r.location?"Location: ".concat(r.location,"\n"):"","\n").concat(t);navigator.clipboard.writeText(e).then(()=>{C.o.success("Event link copied to clipboard!")}).catch(()=>{C.o.error("Failed to copy link")})}V(!1)},G=r.max_attendees?D/r.max_attendees*100:0,H=r.ticket_quantity?(r.ticket_quantity-(r.tickets_sold||0))/r.ticket_quantity*100:100;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(N.$,{variant:"ghost",className:"mb-6",onClick:()=>A.push("/events"),children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Back to Events"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[r.image_url&&(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative w-full h-[400px] rounded-xl overflow-hidden shadow-xl",children:[(0,s.jsx)(l.default,{src:r.image_url,alt:r.title,fill:!0,className:"object-cover",priority:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 66vw, 50vw"}),I&&(0,s.jsx)("div",{className:"absolute top-4 right-4",children:(0,s.jsx)(w.E,{variant:"secondary",className:"bg-black/50 text-white",children:"Past Event"})})]}),(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,s.jsxs)(y.Zp,{className:"shadow-xl border-0",children:[(0,s.jsx)(y.aR,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,s.jsx)(w.E,{className:"".concat({preschool:"bg-[hsl(var(--preschool))]",elementary:"bg-[hsl(var(--elementary))]","middle-high":"bg-[hsl(var(--middle-high))]",all:"bg-primary"}[r.campus]," text-white"),children:{preschool:"Preschool",elementary:"Elementary","middle-high":"Middle/High School",all:"All Campuses"}[r.campus]}),r.ticket_enabled&&(0,s.jsxs)(w.E,{variant:"outline",className:"border-green-500 text-green-600",children:[(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"Ticketed Event"]}),r.rsvp_required&&!r.ticket_enabled&&(0,s.jsx)(w.E,{variant:"outline",children:"RSVP Required"})]}),(0,s.jsx)(y.ZB,{className:"text-3xl mb-2",children:r.title}),(0,s.jsx)(y.BT,{className:"text-base",children:(0,j.B)(U,new Date,{addSuffix:!0})})]}),(0,s.jsx)(N.$,{variant:"outline",size:"icon",onClick:()=>V(!0),className:"flex-shrink-0",children:(0,s.jsx)(x.A,{className:"w-4 h-4"})})]})}),(0,s.jsxs)(y.Wu,{className:"space-y-6",children:[r.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"About this Event"}),(0,s.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap leading-relaxed",children:r.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Date & Time"}),(0,s.jsx)("p",{className:"font-semibold",children:(0,v.GP)(U,"EEEE, MMMM d, yyyy")}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,v.GP)(U,"h:mm a"),r.end_date&&" - ".concat((0,v.GP)(B,"h:mm a"))]})]})]}),r.location&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Location"}),(0,s.jsx)("p",{className:"font-semibold",children:r.location})]})]}),!r.ticket_enabled&&r.max_attendees&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Attendance"}),(0,s.jsxs)("p",{className:"font-semibold mb-2",children:[D," / ",r.max_attendees," people"]}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:"".concat(Math.min(G,100),"%")}})}),G>=90&&(0,s.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Almost full!"})]})]}),r.ticket_enabled&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(m.A,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Tickets"}),(0,s.jsxs)("p",{className:"font-semibold mb-1",children:["$",null==(t=r.ticket_price)?void 0:t.toFixed(2)," per ticket"]}),r.ticket_quantity&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:[r.ticket_quantity-(r.tickets_sold||0)," available"]}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:"".concat(H,"%")}})})]})]})]})]}),F&&(0,s.jsxs)(k.Fc,{className:"border-green-500 bg-green-50",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsxs)(k.TN,{className:"text-green-800",children:["You have RSVP'd to this event",F.num_adults+F.num_children>1&&" with ".concat(F.num_adults+F.num_children," guests")]})]}),!r.ticket_enabled&&r.max_attendees&&D>=r.max_attendees&&(0,s.jsxs)(k.Fc,{className:"border-orange-500 bg-orange-50",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-orange-600"}),(0,s.jsx)(k.TN,{className:"text-orange-800",children:"This event has reached maximum capacity"})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:(0,s.jsxs)(y.Zp,{className:"shadow-xl border-0 sticky top-8",children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{className:"text-xl",children:r.ticket_enabled?"Get Tickets":"RSVP"})}),(0,s.jsx)(y.Wu,{className:"space-y-4",children:Z?(0,s.jsxs)(s.Fragment,{children:[r.ticket_enabled?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Price"}),(0,s.jsxs)("span",{className:"text-2xl font-bold",children:["$",null==(a=r.ticket_price)?void 0:a.toFixed(2)]})]}),r.ticket_quantity&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:[r.ticket_quantity-(r.tickets_sold||0)," tickets remaining"]})]}),(0,s.jsxs)(N.$,{className:"w-full",size:"lg",onClick:()=>q(!0),disabled:!!r.ticket_quantity&&r.tickets_sold>=r.ticket_quantity,children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2"}),r.ticket_quantity&&r.tickets_sold>=r.ticket_quantity?"Sold Out":"Buy Tickets"]})]}):(0,s.jsx)(P,{event:r,userRSVP:F,rsvpCount:D,onRSVPSuccess:()=>{L(e=>e+1),A.refresh()},onRSVPCancel:()=>{L(e=>Math.max(0,e-1)),O(null),A.refresh()}}),(0,s.jsx)(T,{event:r})]}):(0,s.jsx)(k.Fc,{children:(0,s.jsx)(k.TN,{children:"This event has already passed"})})})]})}),S.length>0&&(0,s.jsx)(d.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:(0,s.jsxs)(y.Zp,{className:"shadow-xl border-0",children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{className:"text-xl",children:"Related Events"})}),(0,s.jsx)(y.Wu,{className:"space-y-4",children:S.map(e=>(0,s.jsx)(i(),{href:"/events/".concat(e.id),className:"block group",children:(0,s.jsxs)("div",{className:"p-3 border rounded-lg hover:shadow-md transition-all",children:[(0,s.jsx)("h4",{className:"font-semibold group-hover:text-primary transition-colors mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,v.GP)(new Date(e.event_date),"MMM d, yyyy")})]})},e.id))})]})})]})]})]}),(0,s.jsx)(b.lG,{open:E,onOpenChange:V,children:(0,s.jsxs)(b.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(b.c7,{children:[(0,s.jsx)(b.L3,{children:"Share Event"}),(0,s.jsxs)(b.rr,{children:["Share ",r.title," with others"]})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)(N.$,{variant:"outline",className:"w-full justify-start",onClick:()=>$("email"),children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,s.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,s.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Share via Email"]}),(0,s.jsxs)(N.$,{variant:"outline",className:"w-full justify-start",onClick:()=>$("copy"),children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Link"]})]})]})}),r.ticket_enabled&&(0,s.jsx)(M.A,{event:r,open:z,onOpenChange:q})]})}},98053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>f,EO:()=>x,Lt:()=>c,Rx:()=>g,Zr:()=>v,ck:()=>u,r7:()=>p,tv:()=>d,wd:()=>h});var s=a(95155),n=a(12115),l=a(35646),r=a(64269),i=a(3998);let c=l.bL,d=l.l9,o=l.ZL,m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.hJ,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});m.displayName=l.hJ.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(l.UC,{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n})]})});x.displayName=l.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};h.displayName="AlertDialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="AlertDialogFooter";let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,r.cn)("text-lg font-semibold",a),...n})});p.displayName=l.hE.displayName;let f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});f.displayName=l.VY.displayName;let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,r.cn)((0,i.r)(),a),...n})});g.displayName=l.rc.displayName;let v=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.ZD,{ref:t,className:(0,r.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...n})});v.displayName=l.ZD.displayName}},e=>{e.O(0,[4909,2619,1733,5239,3529,8720,2659,1691,42,6825,5639,4910,7024,8441,1255,7358],()=>e(e.s=13167)),_N_E=e.O()}]);