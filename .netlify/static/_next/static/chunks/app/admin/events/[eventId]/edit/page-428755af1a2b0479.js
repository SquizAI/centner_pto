(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7665],{15237:(e,t,s)=>{Promise.resolve().then(s.bind(s,78733))},70764:(e,t,s)=>{"use strict";s.d(t,{u:()=>g});var a=s(95155),l=s(12115),r=s(3998),n=s(51834),i=s(65142),c=s(76444),d=s(31120),o=s(11186),m=s(87855),u=s(35299),x=s(42529),h=s(75426),p=s(30926);let v=(0,p.createServerReference)("408fa95c0c10c0b61a9bc770ef9676e84557b96977",p.callServer,void 0,p.findSourceMapURL,"generateImagePromptAction");var j=s(18720);function g(e){let{onPromptGenerated:t}=e,[s,p]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)(""),[_,b]=(0,l.useState)("professional"),[w,k]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[E,A]=(0,l.useState)(!1),F=async()=>{if(!y.trim())return void j.o.error("Please enter a subject for the image");f(!0);try{let e=await v({subject:y,style:_,context:w||void 0});e.success&&e.prompt?(S(e.prompt),t&&t(e.prompt),j.o.success("Image prompt generated!")):j.o.error(e.error||"Failed to generate image prompt")}catch(e){console.error("Error generating image prompt:",e),j.o.error("An unexpected error occurred")}finally{f(!1)}},D=async()=>{C&&(await navigator.clipboard.writeText(C),A(!0),j.o.success("Prompt copied to clipboard!"),setTimeout(()=>A(!1),2e3))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>p(!0),className:"gap-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"AI Image Prompt"]}),(0,a.jsx)(n.lG,{open:s,onOpenChange:p,children:(0,a.jsxs)(n.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(n.c7,{children:[(0,a.jsxs)(n.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-primary"}),"AI Image Prompt Generator"]}),(0,a.jsx)(n.rr,{children:"Generate a detailed prompt for image generation services like DALL-E or Midjourney"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{htmlFor:"subject",children:["Image Subject ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(i.p,{id:"subject",placeholder:"e.g., Children participating in a science fair",value:y,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{children:"Image Style"}),(0,a.jsxs)(o.l6,{value:_,onValueChange:e=>b(e),children:[(0,a.jsx)(o.bq,{children:(0,a.jsx)(o.yv,{})}),(0,a.jsxs)(o.gC,{children:[(0,a.jsx)(o.eb,{value:"professional",children:"Professional"}),(0,a.jsx)(o.eb,{value:"fun",children:"Fun & Playful"}),(0,a.jsx)(o.eb,{value:"educational",children:"Educational"}),(0,a.jsx)(o.eb,{value:"festive",children:"Festive & Celebratory"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"context",children:"Additional Context (Optional)"}),(0,a.jsx)(d.T,{id:"context",placeholder:"e.g., For a school event announcement, should show diversity and inclusivity",value:w,onChange:e=>k(e.target.value),rows:3})]}),!C&&(0,a.jsx)(r.$,{onClick:F,disabled:g,className:"w-full",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Prompt..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Generate Image Prompt"]})}),C&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.J,{children:"Generated Prompt"}),(0,a.jsx)(r.$,{type:"button",variant:"ghost",size:"sm",onClick:D,className:"gap-2",children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-green-600"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Copy"]})})]}),(0,a.jsx)("div",{className:"rounded-md border p-4 bg-muted/50",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:C})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use this prompt with DALL-E, Midjourney, or other AI image generation services"})]})]}),(0,a.jsxs)(n.Es,{children:[C&&(0,a.jsxs)(r.$,{type:"button",variant:"outline",onClick:F,children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Generate New Prompt"]}),(0,a.jsx)(r.$,{type:"button",onClick:()=>{p(!1),N(""),k(""),S(""),A(!1)},children:"Close"})]})]})})]})}},78733:(e,t,s)=>{"use strict";s.d(t,{EventEditClient:()=>b});var a=s(95155),l=s(12115),r=s(20063),n=s(86948),i=s(3998),c=s(65142),d=s(76444),o=s(31120),m=s(11186),u=s(30926);let x=(0,u.createServerReference)("6045ace4fa0b3a81b3aae2fbc2886e2028a9bd62b3",u.callServer,void 0,u.findSourceMapURL,"updateEvent");var h=s(97533),p=s(18720),v=s(35626),j=s(71360),g=s(46046),f=s(98053),y=s(16082),N=s(70764),_=s(71431);function b(e){var t,s,u;let{event:b,rsvps:w}=e,k=(0,r.useRouter)(),[C,S]=(0,l.useState)(!1),[E,A]=(0,l.useState)(!1),[F,D]=(0,l.useState)({title:b.title||"",description:b.description||"",event_date:b.event_date?new Date(b.event_date).toISOString().split("T")[0]:"",end_date:b.end_date?new Date(b.end_date).toISOString().split("T")[0]:"",location:b.location||"",campus:b.campus||"all",image_url:b.image_url||"",max_attendees:(null==(t=b.max_attendees)?void 0:t.toString())||"",event_type:b.event_type||"",status:b.status||"draft",rsvp_required:b.rsvp_required||!1,ticket_enabled:b.ticket_enabled||!1,ticket_price:(null==(s=b.ticket_price)?void 0:s.toString())||"",ticket_quantity:(null==(u=b.ticket_quantity)?void 0:u.toString())||"",external_ticket_url:b.external_ticket_url||""}),R=async e=>{e.preventDefault(),S(!0);let t={title:F.title,description:F.description||void 0,event_date:F.event_date,end_date:F.end_date||void 0,location:F.location||void 0,campus:F.campus,image_url:F.image_url||void 0,max_attendees:F.max_attendees?parseInt(F.max_attendees):void 0,status:F.status,rsvp_required:F.rsvp_required,ticket_enabled:F.ticket_enabled,ticket_price:F.ticket_price?parseFloat(F.ticket_price):void 0,ticket_quantity:F.ticket_quantity?parseInt(F.ticket_quantity):void 0,external_ticket_url:F.external_ticket_url||void 0},s=await x(b.id,t);s.error?(p.o.error(s.error),S(!1)):(p.o.success("Event updated successfully"),k.push("/admin/events"),k.refresh())},L=async()=>{A(!0);let e=await (0,h.S)(b.id);e.error?(p.o.error(e.error),A(!1)):(p.o.success("Event deleted successfully"),k.push("/admin/events"),k.refresh())},P=(e,t)=>{D(s=>({...s,[e]:t}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>k.back(),children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Update event details and manage attendees"})]})]}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Basic Information"}),(0,a.jsx)(n.BT,{children:"Essential details about the event"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"title",children:"Event Title *"}),(0,a.jsx)(c.p,{id:"title",placeholder:"e.g., Fall Festival 2024",value:F.title,onChange:e=>P("title",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(d.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(y.Y,{onApply:e=>P("description",e),contentType:"event",currentContent:F.description,context:{title:F.title,campus:[F.campus],eventType:F.event_type}})]}),(0,a.jsx)(o.T,{id:"description",placeholder:"Describe the event...",value:F.description,onChange:e=>P("description",e.target.value),rows:5})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"event_date",children:"Event Date *"}),(0,a.jsx)(c.p,{id:"event_date",type:"date",value:F.event_date,onChange:e=>P("event_date",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"end_date",children:"End Date (Optional)"}),(0,a.jsx)(c.p,{id:"end_date",type:"date",value:F.end_date,onChange:e=>P("end_date",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"location",children:"Location"}),(0,a.jsx)(c.p,{id:"location",placeholder:"e.g., Main Campus Auditorium",value:F.location,onChange:e=>P("location",e.target.value)})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Event Details"}),(0,a.jsx)(n.BT,{children:"Additional information and settings"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"campus",children:"Campus *"}),(0,a.jsxs)(m.l6,{value:F.campus,onValueChange:e=>P("campus",e),children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Select campus"})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"all",children:"All Campuses"}),(0,a.jsx)(m.eb,{value:"preschool",children:"Preschool"}),(0,a.jsx)(m.eb,{value:"elementary",children:"Elementary"}),(0,a.jsx)(m.eb,{value:"middle-high",children:"Middle & High School"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"event_type",children:"Event Type"}),(0,a.jsx)(c.p,{id:"event_type",placeholder:"e.g., Fundraiser, Social, Meeting",value:F.event_type,onChange:e=>P("event_type",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"max_attendees",children:"Max Attendees"}),(0,a.jsx)(c.p,{id:"max_attendees",type:"number",min:"1",placeholder:"Leave empty for unlimited",value:F.max_attendees,onChange:e=>P("max_attendees",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(d.J,{htmlFor:"image_url",children:"Event Image URL"}),(0,a.jsx)(N.u,{})]}),(0,a.jsx)(c.p,{id:"image_url",type:"url",placeholder:"https://example.com/image.jpg",value:F.image_url,onChange:e=>P("image_url",e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Paste a URL to an event image (recommended: 1200x630px). Use AI Image Prompt for generating images with DALL-E or similar services."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"external_ticket_url",children:"External Ticket Sales Link (Optional)"}),(0,a.jsx)(c.p,{id:"external_ticket_url",type:"url",placeholder:"https://eventbrite.com/your-event or https://ticketmaster.com/...",value:F.external_ticket_url,onChange:e=>P("external_ticket_url",e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add a link to external ticket sales platforms like Eventbrite, Ticketmaster, or other ticketing services."})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Publishing Options"}),(0,a.jsx)(n.BT,{children:"Control when and how the event is published"})]}),(0,a.jsx)(n.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(m.l6,{value:F.status,onValueChange:e=>P("status",e),children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Select status"})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"draft",children:"Draft"}),(0,a.jsx)(m.eb,{value:"published",children:"Published"}),(0,a.jsx)(m.eb,{value:"cancelled",children:"Cancelled"})]})]})]})})]}),"published"===F.status&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Share Event"}),(0,a.jsx)(n.BT,{children:"Post this event to social media"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(_.g,{sourceContent:"".concat(F.title,"\n\n").concat(F.description,"\n\nDate: ").concat(new Date(F.event_date).toLocaleDateString(),"\nLocation: ").concat(F.location||"TBA"),sourceTitle:F.title,sourceImage:F.image_url,onPost:e=>{e.success&&p.o.success("Event shared to ".concat(e.platforms.join(" and "),"!"))}})})]}),w&&w.length>0&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{children:["RSVPs (",w.length,")"]}),(0,a.jsx)(n.BT,{children:"People who have registered for this event"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:w.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:(null==(t=e.profiles)?void 0:t.full_name)||"Anonymous"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(null==(s=e.profiles)?void 0:s.email)||"No email"})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(f.Lt,{children:[(0,a.jsx)(f.tv,{asChild:!0,children:(0,a.jsxs)(i.$,{type:"button",variant:"destructive",disabled:C||E,className:"sm:order-1",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Delete Event"]})}),(0,a.jsxs)(f.EO,{children:[(0,a.jsxs)(f.wd,{children:[(0,a.jsx)(f.r7,{children:"Are you sure?"}),(0,a.jsxs)(f.$v,{children:["This action cannot be undone. This will permanently delete the event",w.length>0&&" and remove ".concat(w.length," RSVP(s)"),"."]})]}),(0,a.jsxs)(f.ck,{children:[(0,a.jsx)(f.Zr,{children:"Cancel"}),(0,a.jsx)(f.Rx,{onClick:L,disabled:E,children:E?"Deleting...":"Delete"})]})]})]}),(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>k.back(),disabled:C||E,className:"sm:order-2",children:"Cancel"}),(0,a.jsxs)(i.$,{type:"submit",disabled:C||E,className:"sm:order-3 sm:ml-auto",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),C?"Saving...":"Update Event"]})]})]})]})}},97533:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var a=s(30926);let l=(0,a.createServerReference)("40a9574ffa402246f05352c65eff2cee8ad016d6ea",a.callServer,void 0,a.findSourceMapURL,"deleteEvent")},98053:(e,t,s)=>{"use strict";s.d(t,{$v:()=>v,EO:()=>u,Lt:()=>c,Rx:()=>j,Zr:()=>g,ck:()=>h,r7:()=>p,tv:()=>d,wd:()=>x});var a=s(95155),l=s(12115),r=s(35646),n=s(64269),i=s(3998);let c=r.bL,d=r.l9,o=r.ZL,m=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:t})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(r.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});u.displayName=r.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="AlertDialogFooter";let p=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",s),...l})});p.displayName=r.hE.displayName;let v=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});v.displayName=r.VY.displayName;let j=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.rc,{ref:t,className:(0,n.cn)((0,i.r)(),s),...l})});j.displayName=r.rc.displayName;let g=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.ZD,{ref:t,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});g.displayName=r.ZD.displayName}},e=>{e.O(0,[4909,5239,3529,8720,2659,1691,9065,8267,9996,1431,8441,1255,7358],()=>e(e.s=15237)),_N_E=e.O()}]);