"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1431],{11647:(e,s,a)=>{a.d(s,{E:()=>c});var t=a(95155);a(12115);var r=a(83101),n=a(64269);let i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),s),...r})}},71431:(e,s,a)=>{a.d(s,{g:()=>w});var t=a(95155),r=a(12115),n=a(3998),i=a(51834),c=a(76444),l=a(31120),o=a(73457),d=a(11647),m=a(86948),u=a(17181),x=a(67161),h=a(73155),p=a(35299),f=a(95740),g=a(42529),j=a(6132),v=a(30926);let b=(0,v.createServerReference)("701d298aeda98d64a9ffac31f8bb45d8cb51a7a68b",v.callServer,void 0,v.findSourceMapURL,"generateSocialPostAction");var N=a(18720),y=a(15239);function w(e){let{sourceContent:s,sourceTitle:a,sourceImage:v,onPost:w}=e,[k,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),[F,z]=(0,r.useState)(""),[J,$]=(0,r.useState)([]),[L,T]=(0,r.useState)([]),[_,I]=(0,r.useState)(""),[M,R]=(0,r.useState)([]),[G,O]=(0,r.useState)([]);(0,r.useEffect)(()=>{Z()},[]);let Z=async()=>{R([{id:"1",platform:"instagram",username:"@centneracademy",connected:!0},{id:"2",platform:"facebook",username:"Centner Academy PTO",connected:!0}])},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"friendly";A(!0);try{let a=1===L.length?L[0]:"both",t=await b(s,a,e);t.success&&t.post?(z(t.post.caption),$(t.post.hashtags),N.o.success("Post generated successfully!")):N.o.error(t.error||"Failed to generate post")}catch(e){console.error("Error generating post:",e),N.o.error("An unexpected error occurred")}finally{A(!1)}},U=async()=>{if(!F.trim())return void N.o.error("Please enter a caption");if(0===L.length)return void N.o.error("Please select at least one platform");E(!0);let e=[];for(let s of L)e.push({platform:s,status:"pending"});O(e),await new Promise(e=>setTimeout(e,2e3)),O(e.map(e=>({...e,status:"success",message:"Posted successfully"}))),E(!1),w&&w({success:!0,platforms:L}),N.o.success("Posted to ".concat(L.join(" and "),"!")),setTimeout(()=>{S(!1),V()},2e3)},V=()=>{z(""),$([]),T([]),I(""),O([])},W=e=>{T(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},q=M.filter(e=>e.connected),B=F+(J.length>0?"\n\n"+J.map(e=>"#".concat(e)).join(" "):"");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.$,{variant:"default",onClick:()=>S(!0),className:"gap-2",disabled:0===q.length,children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Post to Social Media"]}),(0,t.jsx)(i.lG,{open:k,onOpenChange:S,children:(0,t.jsxs)(i.Cf,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(i.c7,{children:[(0,t.jsxs)(i.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-primary"}),"Post to Social Media"]}),(0,t.jsx)(i.rr,{children:a&&'Share "'.concat(a,'" on social media')})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c.J,{children:"Select Platforms"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:q.map(e=>(0,t.jsx)(m.Zp,{className:"p-4 cursor-pointer transition-all ".concat(L.includes(e.id)?"ring-2 ring-primary bg-primary/5":"hover:bg-muted"),onClick:()=>W(e.id),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.S,{checked:L.includes(e.id),onCheckedChange:()=>W(e.id)}),"instagram"===e.platform?(0,t.jsx)(x.A,{className:"h-5 w-5 text-pink-600"}):(0,t.jsx)(h.A,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium capitalize",children:e.platform}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.username})]})]})},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Generate with AI"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>H("friendly"),disabled:C,children:[C?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Friendly"]}),(0,t.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>H("professional"),disabled:C,children:"Professional"}),(0,t.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>H("excited"),disabled:C,children:"Excited"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"caption",children:"Caption"}),(0,t.jsx)(l.T,{id:"caption",value:F,onChange:e=>z(e.target.value),placeholder:"Write your caption...",rows:6,className:"resize-none"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[F.length," characters",L.includes("instagram")&&F.length>2200&&(0,t.jsx)("span",{className:"text-destructive ml-2",children:"(Instagram limit: 2200 characters)"})]})]}),J.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Hashtags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:J.map(e=>(0,t.jsxs)(d.E,{variant:"secondary",children:["#",e]},e))})]}),v&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Image"}),(0,t.jsx)("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:(0,t.jsx)(y.default,{src:v,alt:"Post image",fill:!0,className:"object-cover"})})]}),F&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Preview"}),(0,t.jsx)(m.Zp,{className:"p-4 bg-muted/50",children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:B})})]}),G.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:G.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted",children:["pending"===e.status&&(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin text-muted-foreground"}),"success"===e.status&&(0,t.jsx)(g.A,{className:"h-4 w-4 text-green-600"}),"error"===e.status&&(0,t.jsx)(j.A,{className:"h-4 w-4 text-destructive"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:e.platform}),e.message&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground ml-auto",children:e.message})]},e.platform))})]}),(0,t.jsxs)(i.Es,{children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,t.jsx)(n.$,{type:"button",onClick:U,disabled:P||!F.trim()||0===L.length,children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Posting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Post Now"]})})]})]})})]})}},73457:(e,s,a)=>{a.d(s,{S:()=>l});var t=a(95155),r=a(12115),n=a(38162),i=a(5917),c=a(64269);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.bL,{ref:s,className:(0,c.cn)("peer h-5 w-5 shrink-0 rounded border border-input bg-background ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary transition-colors",a),...r,children:(0,t.jsx)(n.C1,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})});l.displayName=n.bL.displayName}}]);