exports.id=6496,exports.ids=[6496],exports.modules={34804:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"00f417d15125c6ca505697e5113bd279203a27b75a":()=>d.CI,"403256b73e0f74f37d9f42b52ddd411f8e46045b8c":()=>d.f3,"4048d5ddefc6a37ea006a167d0ebd08004678658f4":()=>o,"404e9d1a04d59a379d68ce5ac453d243032089518d":()=>d.r7,"405d06ac5ca85a10f4a5d4716a9abb6f1810139eb1":()=>n,"409241288867de481d59d489a4bf40325d923f271b":()=>m,"40e63c2a0d382bccb29fee3e6db993f1a88afa0f74":()=>p,"40e9b88693fbdc8a410feb4c29faf2e9f9e2a84345":()=>d.xw,"604b6fe9d9b942114dda0c92a99467ff0276558d00":()=>q,"60740017cba1b5c4ef480efdfd22845190bdce737e":()=>d.cU,"706d1dcc2ba991ad8cc891414cbcfc168b5c827a62":()=>d.Jv,"70fa08555934b96df7ea9ce3d6623ca469503f6e40":()=>d.Hh});var d=c(82451),e=c(91488);c(27806);var f=c(67497),g=c(91837),h=c(62927),i=c(16800),j=c(40410);let k=h.Ik({event_id:h.Yj().uuid("Invalid event ID"),parent_name:h.Yj().min(2,"Name must be at least 2 characters").max(100,"Name too long"),parent_email:h.Yj().email("Invalid email address"),num_adults:h.ai().int().min(0,"Adults count cannot be negative").default(1),num_children:h.ai().int().min(0,"Children count cannot be negative").default(0),notes:h.Yj().max(500,"Notes too long").optional().nullable()});async function l(){let a=await (0,f.U)(),{data:{user:b}}=await a.auth.getUser();return b}async function m(a){try{let b,c=k.parse(a),d=await (0,f.U)(),e=await l(),{data:h,error:i}=await d.from("events").select("id, status, max_attendees, ticket_enabled").eq("id",c.event_id).single();if(i||!h)return{success:!1,error:"Event not found"};if("published"!==h.status)return{success:!1,error:"This event is not available for RSVP"};if(h.ticket_enabled)return{success:!1,error:"This is a ticketed event. Please purchase tickets instead."};if(e){let{data:a}=await d.from("event_rsvps").select("id").eq("event_id",c.event_id).eq("user_id",e.id).single();b=a}else{let{data:a}=await d.from("event_rsvps").select("id").eq("event_id",c.event_id).eq("parent_email",c.parent_email).single();b=a}if(b)return{success:!1,error:"You have already RSVP'd to this event"};if(h.max_attendees){let{count:a}=await d.from("event_rsvps").select("*",{count:"exact",head:!0}).eq("event_id",c.event_id),b=c.num_adults+c.num_children;if((a||0)+b>h.max_attendees)return{success:!1,error:"This event has reached maximum capacity"}}let{data:j,error:m}=await d.from("event_rsvps").insert({event_id:c.event_id,user_id:e?.id||null,parent_name:c.parent_name,parent_email:c.parent_email,num_adults:c.num_adults,num_children:c.num_children,notes:c.notes}).select("id").single();if(m)return{success:!1,error:`Failed to create RSVP: ${m.message}`};return(0,g.revalidatePath)("/events"),(0,g.revalidatePath)(`/events/${c.event_id}`),{success:!0,message:"RSVP created successfully",data:{id:j.id}}}catch(a){if(a instanceof i.G)return{success:!1,error:a.errors[0].message};return{success:!1,error:a instanceof Error?a.message:"Failed to create RSVP"}}}async function n(a){try{let b=await (0,f.U)(),c=await l();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid RSVP ID"};let{data:d,error:e}=await b.from("event_rsvps").select("user_id, event_id, parent_email").eq("id",a).single();if(e||!d)return{success:!1,error:"RSVP not found"};if(!c)return{success:!1,error:"You must be logged in to cancel your RSVP"};if(d.user_id!==c.id)return{success:!1,error:"You can only cancel your own RSVPs"};let{error:h}=await b.from("event_rsvps").delete().eq("id",a);if(h)return{success:!1,error:`Failed to cancel RSVP: ${h.message}`};return(0,g.revalidatePath)("/events"),(0,g.revalidatePath)(`/events/${d.event_id}`),{success:!0,message:"RSVP cancelled successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to cancel RSVP"}}}async function o(a){try{let b=await (0,f.U)();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{data:c,error:d}=await b.from("event_rsvps").select("*").eq("event_id",a).order("created_at",{ascending:!1});if(d)return{success:!1,error:`Failed to fetch RSVPs: ${d.message}`};return{success:!0,data:c||[]}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to fetch RSVPs"}}}async function p(a){try{let b=await (0,f.U)(),c=await l();if(!c)return{success:!1,error:"Authentication required"};if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{data:d,error:e}=await b.from("event_rsvps").select("*").eq("event_id",a).eq("user_id",c.id).single();if(e&&"PGRST116"!==e.code)return{success:!1,error:`Failed to fetch RSVP: ${e.message}`};return{success:!0,data:d||null}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to fetch RSVP"}}}async function q(a,b){try{let c=await (0,f.U)(),d=await l();if(!d)return{success:!1,error:"Authentication required"};if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid RSVP ID"};let{data:e,error:h}=await c.from("event_rsvps").select("user_id, event_id").eq("id",a).single();if(h||!e)return{success:!1,error:"RSVP not found"};if(e.user_id!==d.id)return{success:!1,error:"You can only update your own RSVPs"};let{error:i}=await c.from("event_rsvps").update({parent_name:b.parent_name,parent_email:b.parent_email,num_adults:b.num_adults,num_children:b.num_children,notes:b.notes}).eq("id",a);if(i)return{success:!1,error:`Failed to update RSVP: ${i.message}`};return(0,g.revalidatePath)("/events"),(0,g.revalidatePath)(`/events/${e.event_id}`),{success:!0,message:"RSVP updated successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to update RSVP"}}}(0,j.D)([m,n,o,p,q]),(0,e.A)(m,"409241288867de481d59d489a4bf40325d923f271b",null),(0,e.A)(n,"405d06ac5ca85a10f4a5d4716a9abb6f1810139eb1",null),(0,e.A)(o,"4048d5ddefc6a37ea006a167d0ebd08004678658f4",null),(0,e.A)(p,"40e63c2a0d382bccb29fee3e6db993f1a88afa0f74",null),(0,e.A)(q,"604b6fe9d9b942114dda0c92a99467ff0276558d00",null)},40068:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>m,Es:()=>o,L3:()=>p,c7:()=>n,lG:()=>i,rr:()=>q,zM:()=>j});var d=c(21124),e=c(38301),f=c(39641),g=c(47089),h=c(44943);let i=f.bL,j=f.l9,k=f.ZL;f.bm;let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));l.displayName=f.hJ.displayName;let m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(k,{children:[(0,d.jsx)(l,{}),(0,d.jsxs)(f.UC,{ref:e,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=f.UC.displayName;let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});n.displayName="DialogHeader";let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});o.displayName="DialogFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));p.displayName=f.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));q.displayName=f.VY.displayName},56361:(a,b,c)=>{"use strict";c.d(b,{M:()=>e});var d=c(85708);let e=(0,d.createServerReference)("409241288867de481d59d489a4bf40325d923f271b",d.callServer,void 0,d.findSourceMapURL,"createRSVP")},62159:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(75338),e=c(70673);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("animate-pulse rounded-md bg-muted",a),...b})}},62186:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},67480:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h});var d=c(75338),e=c(74515),f=c(70673);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter"},68120:(a,b,c)=>{"use strict";c.d(b,{J:()=>j});var d=c(21124),e=c(38301),f=c(46029),g=c(26691),h=c(44943);let i=(0,g.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.b,{ref:c,className:(0,h.cn)(i(),a),...b}));j.displayName=f.b.displayName},68254:(a,b,c)=>{"use strict";c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:c,...b}));g.displayName="Textarea"},70673:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(81171),e=c(11167);function f(...a){return(0,e.QP)((0,d.$)(a))}},78335:()=>{},93758:(a,b,c)=>{"use strict";c.d(b,{p:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:e,...c}));g.displayName="Input"},96487:()=>{}};