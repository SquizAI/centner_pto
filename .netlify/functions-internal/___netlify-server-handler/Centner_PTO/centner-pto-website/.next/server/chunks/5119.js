exports.id=5119,exports.ids=[5119],exports.modules={10708:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},25799:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=c(82831),e=c(43740),f=c(29305),g=c(61981),h=c(26906),i=c(69168);("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},29088:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unauthorized",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},47614:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRedirectError:function(){return g},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return k},getURLFromRedirectError:function(){return j},permanentRedirect:function(){return i},redirect:function(){return h}});let d=c(91203),e=c(92781),f=c(19121).actionAsyncStorage;function g(a,b,c){void 0===c&&(c=d.RedirectStatusCode.TemporaryRedirect);let f=Object.defineProperty(Error(e.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.REDIRECT_ERROR_CODE+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.RedirectType.push:e.RedirectType.replace),g(a,b,d.RedirectStatusCode.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.RedirectType.replace),g(a,b,d.RedirectStatusCode.PermanentRedirect)}function j(a){return(0,e.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function k(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function l(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},48152:(a,b,c)=>{"use strict";c.d(b,{U:()=>f});var d=c(4410),e=c(86802);async function f(){let a=await (0,e.UL)();return(0,d.createServerClient)("https://whtwuisrljgjtpzbyhfp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndodHd1aXNybGpnanRwemJ5aGZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NzgzMjAsImV4cCI6MjA3NjA1NDMyMH0.U_D-Zv0Qpev9_QIBRRRidzAGffpHVIpaIeGZhu_gKDw",{cookies:{getAll:()=>a.getAll(),setAll(b){try{b.forEach(({name:b,value:c,options:d})=>{a.set(b,c,d)})}catch{}}}})}},56575:(a,b,c)=>{"use strict";c.d(b,{KA:()=>s,SX:()=>r,TL:()=>t,Z8:()=>v,kQ:()=>w,lh:()=>p,m$:()=>u,qM:()=>q,rd:()=>x});var d=c(91488);c(27806);var e=c(67497),f=c(91837),g=c(62927),h=c(16800),i=c(40410);let j=g.Ik({title:g.Yj().min(3,"Title must be at least 3 characters").max(200,"Title too long"),description:g.Yj().min(10,"Description must be at least 10 characters").optional(),event_date:g.Yj().refine(a=>!isNaN(Date.parse(a)),"Invalid date format"),end_date:g.Yj().refine(a=>!isNaN(Date.parse(a)),"Invalid date format").optional().nullable(),location:g.Yj().min(2,"Location is required").optional(),campus:g.k5(["preschool","elementary","middle-high","all"]).default("all"),image_url:g.Yj().url("Invalid image URL").optional().nullable(),max_attendees:g.ai().int().positive("Max attendees must be positive").optional().nullable(),rsvp_required:g.zM().default(!1),status:g.k5(["draft","published","cancelled"]).default("published"),ticket_enabled:g.zM().default(!1).optional(),ticket_price:g.ai().min(0,"Price cannot be negative").optional().nullable(),ticket_quantity:g.ai().int().positive("Quantity must be positive").optional().nullable(),ticket_sales_start:g.Yj().optional().nullable(),ticket_sales_end:g.Yj().optional().nullable(),requires_approval:g.zM().default(!1).optional(),external_ticket_url:g.Yj().url("Invalid URL").optional().nullable()}),k=j.partial(),l=g.Ik({status:g.k5(["draft","published","cancelled","all"]).optional(),campus:g.k5(["preschool","elementary","middle-high","all"]).optional(),startDate:g.Yj().optional(),endDate:g.Yj().optional(),limit:g.ai().int().positive().max(100).optional().default(50),offset:g.ai().int().min(0).optional().default(0)}),m=g.Ik({baseEvent:j,recurrence:g.Ik({frequency:g.k5(["daily","weekly","biweekly","monthly"]),count:g.ai().int().positive().max(52,"Cannot create more than 52 recurring events"),startDate:g.Yj()})});async function n(){let a=await (0,e.U)(),{data:{user:b}}=await a.auth.getUser();if(!b)throw Error("Authentication required");return{supabase:a,user:b}}async function o(){let{supabase:a,user:b}=await n(),{data:c}=await a.from("profiles").select("role").eq("id",b.id).single();if(!c||"admin"!==c.role&&"super_admin"!==c.role)throw Error("Admin access required");return{supabase:a,user:b,profile:c}}async function p(a){try{let b=j.parse(a),{supabase:c,user:d}=await o(),{data:e,error:g}=await c.from("events").insert({...b,created_by:d.id}).select("id").single();if(g)return{success:!1,error:`Failed to create event: ${g.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)("/admin/events"),{success:!0,message:"Event created successfully",data:{id:e.id}}}catch(a){if(a instanceof h.G)return{success:!1,error:a.errors[0].message};return{success:!1,error:a instanceof Error?a.message:"Failed to create event"}}}async function q(a,b){try{let c=k.parse(b),{supabase:d}=await o();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{error:e}=await d.from("events").update(c).eq("id",a);if(e)return{success:!1,error:`Failed to update event: ${e.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)(`/events/${a}`),(0,f.revalidatePath)(`/calendar/${a}`),(0,f.revalidatePath)("/admin/events"),{success:!0,message:"Event updated successfully"}}catch(a){if(a instanceof h.G)return{success:!1,error:a.errors[0].message};return{success:!1,error:a instanceof Error?a.message:"Failed to update event"}}}async function r(a){try{let{supabase:b}=await o();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{error:c}=await b.from("events").delete().eq("id",a);if(c)return{success:!1,error:`Failed to delete event: ${c.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)("/admin/events"),{success:!0,message:"Event deleted successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to delete event"}}}async function s(a){try{let{supabase:b}=await o();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{error:c}=await b.from("events").update({status:"published"}).eq("id",a);if(c)return{success:!1,error:`Failed to publish event: ${c.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)(`/events/${a}`),(0,f.revalidatePath)(`/calendar/${a}`),(0,f.revalidatePath)("/admin/events"),{success:!0,message:"Event published successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to publish event"}}}async function t(a,b){try{let{supabase:b}=await o();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{data:c,error:d}=await b.from("events").select(`
        id,
        title,
        event_rsvps (
          id,
          parent_email,
          parent_name
        ),
        event_tickets (
          id,
          buyer_email,
          buyer_name,
          status
        )
      `).eq("id",a).single();if(d||!c)return{success:!1,error:"Event not found"};let{error:e}=await b.from("events").update({status:"cancelled"}).eq("id",a);if(e)return{success:!1,error:`Failed to cancel event: ${e.message}`};let g=c.event_rsvps?.length||0,h=c.event_tickets?.filter(a=>"paid"===a.status).length||0;return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)(`/events/${a}`),(0,f.revalidatePath)(`/calendar/${a}`),(0,f.revalidatePath)("/admin/events"),{success:!0,message:`Event cancelled. ${g+h} attendee(s) should be notified.`}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to cancel event"}}}async function u(a){try{let{supabase:b,user:c}=await o();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{data:d,error:e}=await b.from("events").select("*").eq("id",a).single();if(e||!d)return{success:!1,error:"Event not found"};let{id:g,created_at:h,updated_at:i,tickets_sold:j,...k}=d,{data:l,error:m}=await b.from("events").insert({...k,title:`${k.title} (Copy)`,status:"draft",tickets_sold:0,created_by:c.id}).select("id").single();if(m||!l)return{success:!1,error:`Failed to duplicate event: ${m?.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)("/admin/events"),{success:!0,message:"Event duplicated successfully",data:{id:l.id}}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to duplicate event"}}}async function v(a){try{let b=await (0,e.U)();if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return{success:!1,error:"Invalid event ID"};let{data:c,error:d}=await b.from("events").select("*").eq("id",a).single();if(d||!c)return{success:!1,error:"Event not found"};return{success:!0,data:c}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to fetch event"}}}async function w(a){try{let b=await (0,e.U)(),c=a?l.parse(a):l.parse({}),d=b.from("events").select("*",{count:"exact"}).order("event_date",{ascending:!0});c.status&&"all"!==c.status&&(d=d.eq("status",c.status)),c.campus&&"all"!==c.campus&&(d=d.eq("campus",c.campus)),c.startDate&&(d=d.gte("event_date",c.startDate)),c.endDate&&(d=d.lte("event_date",c.endDate)),d=d.range(c.offset,c.offset+c.limit-1);let{data:f,error:g,count:h}=await d;if(g)return{success:!1,error:`Failed to fetch events: ${g.message}`};return{success:!0,data:f||[]}}catch(a){if(a instanceof h.G)return{success:!1,error:a.errors[0].message};return{success:!1,error:a instanceof Error?a.message:"Failed to fetch events"}}}async function x(a){try{let b=m.parse(a),{supabase:c,user:d}=await o(),e=[],g=new Date(b.recurrence.startDate);for(let a=0;a<b.recurrence.count;a++){let c=new Date(g);switch(b.recurrence.frequency){case"daily":c.setDate(g.getDate()+a);break;case"weekly":c.setDate(g.getDate()+7*a);break;case"biweekly":c.setDate(g.getDate()+14*a);break;case"monthly":c.setMonth(g.getMonth()+a)}e.push(c)}let h=e.map((a,c)=>({...b.baseEvent,title:`${b.baseEvent.title} (${c+1}/${b.recurrence.count})`,event_date:a.toISOString(),created_by:d.id})),{data:i,error:j}=await c.from("events").insert(h).select("id");if(j)return{success:!1,error:`Failed to create recurring events: ${j.message}`};return(0,f.revalidatePath)("/events"),(0,f.revalidatePath)("/calendar"),(0,f.revalidatePath)("/admin/events"),{success:!0,message:`Successfully created ${i.length} recurring events`,data:{created:i.length,ids:i.map(a=>a.id)}}}catch(a){if(a instanceof h.G)return{success:!1,error:a.errors[0].message};return{success:!1,error:a instanceof Error?a.message:"Failed to create recurring events"}}}g.Ik({guests_count:g.ai().int().min(1,"At least 1 guest required").default(1),notes:g.Yj().optional()}),(0,i.D)([p,q,r,s,t,u,v,w,x]),(0,d.A)(p,"407e3c808409b9c3c7299d8366c245a97074abc50d",null),(0,d.A)(q,"6045ace4fa0b3a81b3aae2fbc2886e2028a9bd62b3",null),(0,d.A)(r,"40a9574ffa402246f05352c65eff2cee8ad016d6ea",null),(0,d.A)(s,"40c8cd3705d618548afb3e3bc0c26623ab279b4c76",null),(0,d.A)(t,"60000658ce1648338b7accf5081404ba930c64a907",null),(0,d.A)(u,"40cd49e978148f4f1c8b1118625e54c3cf690ba812",null),(0,d.A)(v,"40b3e344fc4a115383633434848a5d7647b09a143e",null),(0,d.A)(w,"4083f16864995728fa5332a4e4d4e570dc500c94e6",null),(0,d.A)(x,"404f06e32bca7067173673deb01653f6f6d8262d96",null)},64404:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"notFound",{enumerable:!0,get:function(){return e}});let d=""+c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function e(){let a=Object.defineProperty(Error(d),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=d,a}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},64712:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=c(25799).unstable_rethrow;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},67837:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"forbidden",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},75219:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},78335:()=>{},82161:(a,b,c)=>{"use strict";var d=c(93045);c.o(d,"notFound")&&c.d(b,{notFound:function(){return d.notFound}}),c.o(d,"redirect")&&c.d(b,{redirect:function(){return d.redirect}})},93045:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ReadonlyURLSearchParams:function(){return k},RedirectType:function(){return e.RedirectType},forbidden:function(){return g.forbidden},notFound:function(){return f.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return h.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return i.unstable_rethrow}});let d=c(47614),e=c(92781),f=c(64404),g=c(67837),h=c(29088),i=c(64712);class j extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class k extends URLSearchParams{append(){throw new j}delete(){throw new j}set(){throw new j}sort(){throw new j}}function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},93972:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(75338),e=c(96048);async function f({children:a}){return await (0,e.ZT)(),(0,d.jsx)(d.Fragment,{children:a})}},96048:(a,b,c)=>{"use strict";c.d(b,{HW:()=>g,ZT:()=>i,oC:()=>h});var d=c(74515),e=c(48152),f=c(82161);let g=(0,d.cache)(async()=>{let a=await (0,e.U)(),{data:{user:b}}=await a.auth.getUser();if(!b)return null;let{data:c}=await a.from("profiles").select("*").eq("id",b.id).single();return c?{...b,profile:c}:null});async function h(){let a=await g();return a||(0,f.redirect)("/login"),a}async function i(){let a=await h();return a.profile&&("admin"===a.profile.role||"super_admin"===a.profile.role)||(0,f.redirect)("/"),a}},96487:()=>{}};